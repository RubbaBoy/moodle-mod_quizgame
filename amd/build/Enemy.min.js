define(["mod_quizgame/GameObject"],function(a){function b(b,c,d){a.call(this,b),b.position.y=15*Math.random(),b.position.x=40+20*Math.random(),b.position.z=50*(Math.random()-.5),this.object3d=b,this.answer=c,this.fraction=d,this.rethink(),setInterval(this.rethink.bind(this),1e3*(1+Math.random())),this.addText(),this.object3d.userData.enemyObj=this}var c=Math.PI/180;return b.prototype=Object.create(a.prototype),b.prototype.update=function(b){a.prototype.update.call(this,b),this.object3d.position.x<0&&(this.object3d.position.x=60),this.object3d.position.z=Math.min(this.object3d.position.z,20),this.object3d.position.z=Math.max(this.object3d.position.z,-20),this.object3d.position.y=Math.min(this.object3d.position.y,10),this.object3d.position.y=Math.max(this.object3d.position.y,-10)},b.prototype.addText=function(){var a=1024,b=128;this.canvas=document.createElement("canvas"),this.canvas.width=a,this.canvas.height=b;var d=this.canvas.getContext("2d");d.font="80px Arial",d.textAlign="center",d.fillStyle="#FFFFFF",d.fillText(this.answer,a/2,80);var e=new THREE.Texture(this.canvas);e.needsUpdate=!0;var f=new THREE.MeshBasicMaterial({map:e});f.transparent=!0;var g=new THREE.PlaneGeometry(a,b);this.questionPlane=new THREE.Mesh(g,f),this.object3d.add(this.questionPlane),this.questionPlane.translateY(50),this.questionPlane.rotateY(-90*c)},b.prototype.rethink=function(){this.velocity=new THREE.Vector3(2*-(Math.random()-.25),3*(Math.random()-.25),15*(Math.random()-.5))},b.prototype.die=function(b,c){this.alive=!1,c.enemies.remove(this.object3d,c),a.prototype.die.call(this,b,c),c.score+=1e3*this.fraction,this.fraction>0&&(c.currentPointsLeft-=this.fraction)},b.prototype.gotShot=function(a,b,c){this.fraction>0?(a.die(b,c),this.die(b,c),(this.fraction>=1||this.fraction>0&&c.currentPointsLeft<=0)&&c.nextLevel(),c.playSound("explosion")):(c.score+=1*(this.fraction-.5),c.updateHUD(),a.deflect(c))},b});