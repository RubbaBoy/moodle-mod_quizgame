define([],function(){return QuizgameControls=function(a,b){function c(a){a.preventDefault()}function d(a,b){return function(){b.apply(a,arguments)}}this.object=a,this.target=new THREE.Vector3(0,0,0),this.domElement=void 0!==b?b:document,this.enabled=!0,this.movementSpeed=1,this.lookSpeed=.005,this.lookVertical=!0,this.autoForward=!1,this.activeLook=!0,this.heightSpeed=!1,this.heightCoef=1,this.heightMin=0,this.heightMax=1,this.constrainVertical=!1,this.verticalMin=0,this.verticalMax=Math.PI,this.autoSpeedFactor=0,this.mouseX=0,this.mouseY=0,this.lat=0,this.lon=0,this.phi=0,this.theta=0,this.moveForward=!1,this.moveBackward=!1,this.moveLeft=!1,this.moveRight=!1,this.mouseDragOn=!1,this.viewHalfX=0,this.viewHalfY=0,this.domElement!==document&&this.domElement.setAttribute("tabindex",-1),this.handleResize=function(){this.domElement===document?(this.viewHalfX=window.innerWidth/2,this.viewHalfY=window.innerHeight/2):(this.viewHalfX=this.domElement.offsetWidth/2,this.viewHalfY=this.domElement.offsetHeight/2)},this.onMouseDown=function(a){this.domElement!==document&&this.domElement.focus(),a.preventDefault(),this.mouseDragOn=!0},this.onMouseUp=function(a){a.preventDefault(),a.stopPropagation(),this.mouseDragOn=!1},this.onMouseMove=function(a){this.domElement===document?(this.mouseX=a.pageX-this.viewHalfX,this.mouseY=a.pageY-this.viewHalfY):(this.mouseX=a.pageX-this.domElement.offsetLeft-this.viewHalfX,this.mouseY=a.pageY-this.domElement.offsetTop-this.viewHalfY)},this.onKeyDown=function(a){switch(a.keyCode){case 38:case 87:this.moveForward=!0;break;case 37:case 65:this.moveLeft=!0;break;case 40:case 83:this.moveBackward=!0;break;case 39:case 68:this.moveRight=!0;break;case 82:this.moveUp=!0;break;case 70:this.moveDown=!0}},this.onKeyUp=function(a){switch(a.keyCode){case 38:case 87:this.moveForward=!1;break;case 37:case 65:this.moveLeft=!1;break;case 40:case 83:this.moveBackward=!1;break;case 39:case 68:this.moveRight=!1;break;case 82:this.moveUp=!1;break;case 70:this.moveDown=!1}},this.update=function(a){if(this.enabled!==!1){if(this.heightSpeed){var b=THREE.Math.clamp(this.object.position.y,this.heightMin,this.heightMax),c=b-this.heightMin;this.autoSpeedFactor=a*(c*this.heightCoef)}else this.autoSpeedFactor=0;var d=a*this.movementSpeed;(this.moveForward||this.autoForward&&!this.moveBackward)&&this.object.translateZ(-(d+this.autoSpeedFactor)),this.moveBackward&&this.object.translateZ(d),this.moveLeft&&this.object.translateX(-d),this.moveRight&&this.object.translateX(d),this.moveUp&&this.object.translateY(d),this.moveDown&&this.object.translateY(-d);var e=a*this.lookSpeed;this.activeLook||(e=0);var f=1;this.constrainVertical&&(f=Math.PI/(this.verticalMax-this.verticalMin)),this.lon+=this.mouseX*e,this.lookVertical&&(this.lat-=this.mouseY*e*f),this.lat=Math.max(-85,Math.min(85,this.lat)),this.phi=THREE.Math.degToRad(90-this.lat),this.theta=THREE.Math.degToRad(this.lon),this.constrainVertical&&(this.phi=THREE.Math.mapLinear(this.phi,0,Math.PI,this.verticalMin,this.verticalMax));var g=this.target,h=this.object.position;g.x=h.x+100*Math.sin(this.phi)*Math.cos(this.theta),g.y=h.y+100*Math.cos(this.phi),g.z=h.z+100*Math.sin(this.phi)*Math.sin(this.theta),this.object.lookAt(g)}},this.dispose=function(){this.domElement.removeEventListener("contextmenu",c,!1),this.domElement.removeEventListener("mousedown",f,!1),this.domElement.removeEventListener("mousemove",e,!1),this.domElement.removeEventListener("mouseup",g,!1),window.removeEventListener("keydown",h,!1),window.removeEventListener("keyup",i,!1)};var e=d(this,this.onMouseMove),f=d(this,this.onMouseDown),g=d(this,this.onMouseUp),h=d(this,this.onKeyDown),i=d(this,this.onKeyUp);this.domElement.addEventListener("contextmenu",c,!1),this.domElement.addEventListener("mousemove",e,!1),this.domElement.addEventListener("mousedown",f,!1),this.domElement.addEventListener("mouseup",g,!1),window.addEventListener("keydown",h,!1),window.addEventListener("keyup",i,!1),this.handleResize()},QuizgameControls});