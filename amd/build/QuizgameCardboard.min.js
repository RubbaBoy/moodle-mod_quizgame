define(["jquery","mod_quizgame/Quizgame"],function(a,b){QuizgameCardboard=function(a){b.call(this,a),this.eyeview={width:Math.max(screen.width,screen.height)/2,height:Math.min(screen.width,screen.height)}},QuizgameCardboard.prototype=Object.create(b.prototype),QuizgameCardboard.prototype.constructor=QuizgameCardboard,QuizgameCardboard.prototype.render=function(){this.effect.render(this.scene,this.camera)},QuizgameCardboard.prototype.createHUD=function(){this.hudCanvas=document.createElement("canvas"),this.hudCanvas.width=this.eyeview.width,this.hudCanvas.height=this.eyeview.height,this.hudTexture=new THREE.Texture(this.hudCanvas),this.updateHUD();var a=new THREE.MeshBasicMaterial({map:this.hudTexture});a.transparent=!0,this.hudCanvas=document.createElement("canvas"),this.hudCanvas.width=this.eyeview.width,this.hudCanvas.height=this.eyeview.height,this.hudTexture=new THREE.Texture(this.hudCanvas),this.updateHUD();var a=new THREE.MeshBasicMaterial({map:this.hudTexture});a.transparent=!0;var b=new THREE.PlaneGeometry(1,1);this.hudPlane=new THREE.Mesh(b,a),this.camera.add(this.hudPlane),this.hudPlane.translateZ(-.5)},QuizgameCardboard.prototype.updateHUD=function(){this.eyeview.width=window.innerWidth/2,this.eyeview.height=window.innerHeight;var a=Math.round(this.eyeview.height/25);this.hudCanvas.width=this.eyeview.width,this.hudCanvas.height=this.eyeview.height,this.hudBitmap=this.hudCanvas.getContext("2d"),this.hudBitmap.clearRect(0,0,this.eyeview.width,this.eyeview.height),this.hudBitmap.font=a+"px Arial",this.hudBitmap.textAlign="center",this.hudBitmap.fillStyle="#f98012";var b=Math.min(this.level,this.questions.length-1);this.wrapText(this.hudBitmap,this.questions[b].question,this.eyeview.width/2,.3*this.eyeview.height,.66*this.eyeview.width,a),this.hudBitmap.font=a+"px Arial",this.hudBitmap.textAlign="center",this.hudBitmap.fillStyle="#f98012",this.hudBitmap.fillText("Score: "+Math.round(this.score)+" Level: "+(this.level+1),this.eyeview.width/2,.7*this.eyeview.height),this.hudBitmap.beginPath(),this.aimed?this.hudBitmap.lineWidth=this.eyeview.height/100:this.hudBitmap.lineWidth=this.eyeview.height/300,this.hudBitmap.strokeStyle="#f98012",this.hudBitmap.arc(this.eyeview.width/2,this.eyeview.height/2,this.eyeview.height/20,0,2*Math.PI),this.hudBitmap.stroke(),this.hudTexture.needsUpdate=!0}});